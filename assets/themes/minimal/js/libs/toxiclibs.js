//v0.1.0 toxiclibs.js (http://haptic-data.com/toxiclibsjs)
var toxi={};(function(){var d,e,g;(function(a){function j(a,b){if(a&&a.charAt(0)==="."&&b){b=b.split("/"),b=b.slice(0,b.length-1),a=b.concat(a.split("/"));var c,d;for(c=0;d=a[c];c++)if(d===".")a.splice(c,1),c-=1;else if(d==="..")if(c!==1||a[2]!==".."&&a[0]!=="..")c>0&&(a.splice(c-1,2),c-=2);else break;a=a.join("/")}return a}function k(b,c){return function(){return i.apply(a,f.call(arguments,0).concat([b,c]))}}function l(a){return function(b){return j(b,a)}}function m(a){return function(c){b[a]=c}}function n(d){if(c.hasOwnProperty(d)){var e=c[d];delete c[d],h.apply(a,e)}return b[d]}function o(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=j(a.slice(0,e),b),a=a.slice(e+1),d=n(c),d&&d.normalize?a=d.normalize(a,l(b)):a=j(a,b)):a=j(a,b),{f:c?c+"!"+a:a,n:a,p:d}}var b={},c={},f=[].slice,h,i;if(typeof g=="function")return;h=function(d,e,f,g){var h=[],i,j,l,p,q,r;g||(g=d);if(typeof f=="function"){!e.length&&f.length&&(e=["require","exports","module"]);for(p=0;p<e.length;p++){r=o(e[p],g),l=r.f;if(l==="require")h[p]=k(d);else if(l==="exports")h[p]=b[d]={},i=!0;else if(l==="module")j=h[p]={id:d,uri:"",exports:b[d]};else if(b.hasOwnProperty(l)||c.hasOwnProperty(l))h[p]=n(l);else if(r.p)r.p.load(r.n,k(g,!0),m(l),{}),h[p]=b[l];else throw d+" missing "+l}q=f.apply(b[d],h),d&&(j&&j.exports!==a?b[d]=j.exports:i||(b[d]=q))}else d&&(b[d]=f)},d=i=function(b,c,d,e){return typeof b=="string"?n(o(b,c).f):(b.splice||(c.splice?(b=c,c=arguments[2]):b=[]),e?h(a,b,c,d):setTimeout(function(){h(a,b,c,d)},15),i)},i.config=function(){return i},e||(e=i),g=function(a,b,d){b.splice||(d=b,b=[]),g.unordered?c[a]=[a,b,d]:h(a,b,d)},g.amd={jQuery:!0}})(),g("almond",function(){}),g.unordered=!0,g("almondSettings",function(){}),g("toxi/math/mathUtils",["require","exports","module"],function(a,b,c){MathUtils={},MathUtils.SQRT2=Math.sqrt(2),MathUtils.SQRT3=Math.sqrt(3),MathUtils.LOG2=Math.log(2),MathUtils.PI=3.141592653589793,MathUtils.INV_PI=1/MathUtils.PI,MathUtils.HALF_PI=MathUtils.PI/2,MathUtils.THIRD_PI=MathUtils.PI/3,MathUtils.QUARTER_PI=MathUtils.PI/4,MathUtils.TWO_PI=MathUtils.PI*2,MathUtils.THREE_HALVES_PI=MathUtils.TWO_PI-MathUtils.HALF_PI,MathUtils.PI_SQUARED=MathUtils.PI*MathUtils.PI,MathUtils.EPS=1.1920928955078125e-7,MathUtils.DEG2RAD=MathUtils.PI/180,MathUtils.RAD2DEG=180/MathUtils.PI,MathUtils.SHIFT23=1<<23,MathUtils.INV_SHIFT23=1/MathUtils.SHIFT23,MathUtils.SIN_A=-4/(MathUtils.PI*MathUtils.PI),MathUtils.SIN_B=4/MathUtils.PI,MathUtils.SIN_P=.225,MathUtils.abs=Math.abs,MathUtils.ceilPowerOf2=function(a){var b=1;while(b<a)b<<=1;return b},MathUtils.clip=function(a,b,c){return a<b?b:a>c?c:a},MathUtils.clipNormalized=function(a){return a<0?0:a>1?1:a},MathUtils.cos=Math.cos,MathUtils.degrees=function(a){return a*this.RAD2DEG},MathUtils.fastCos=function(a){return MathUtils.fastSin(a+(a>MathUtils.HALF_PI?-MathUtils.THREE_HALVES_PI:MathUtils.HALF_PI))},MathUtils.fastSin=function(a){return a=MathUtils.SIN_B*a+MathUtils.SIN_A*a*Math.abs(a),MathUtils.SIN_P*(a*Math.abs(a)-a)+a},MathUtils.flipCoin=function(a){return Math.random()<.5},MathUtils.floor=function(a){var b=parseInt(a,10);return a<0&&a!=b&&b--,b},MathUtils.floorPowerOf2=function(a){return parseInt(Math.pow(2,parseInt(Math.log(a)/MathUtils.LOG2,10)),10)},MathUtils.max=function(a,b,c){return c?a>b?a>c?a:c:b>c?b:c:Math.max(a,b)},MathUtils.min=function(a,b,c){return c?a<b?a<c?a:c:b<c?b:c:Math.min(a,b)},MathUtils.normalizedRandom=function(){return Math.random()*2-1},MathUtils.radians=function(a){return a*MathUtils.DEG2RAD},MathUtils.random=function(a,b,c){return arguments.length==2&&(c=b,b=a,a=Math.random),!b&&!c?Math.random():c?a()*(c-b)+b:(c=b,a()*c)},MathUtils.reduceAngle=function(a){return a%=MathUtils.TWO_PI,Math.abs(a)>MathUtils.PI&&(a-=MathUtils.TWO_PI),Math.abs(a)>MathUtils.HALF_PI&&(a=MathUtils.PI-a),a},MathUtils.sign=function(a){return a<0?-1:a>0?1:0},MathUtils.sin=function(a){return a=MathUtils.reduceAngle(a),Math.abs(a)>MathUtils.QUARTER_PI?MathUtils.fastCos(MathUtils.HALF_PI-a):MathUtils.fastSin(a)},c.exports=MathUtils}),g("toxi/geom/Line3D",["require","exports","module","../math/mathUtils"],function(a,b,c){var d=a("../math/mathUtils"),e=function(a,b){this.a=a,this.b=b};e.prototype={closestLineTo:function(a){var b=a.a.sub(a.b);if(b.isZeroVector())return new e.LineIntersection(e.LineIntersection.Type.NON_INTERSECTING);var c=this.b.sub(this.a);if(c.isZeroVector())return new e.LineIntersection(e.LineIntersection.Type.NON_INTERSECTING);var f=this.a.sub(a.a),g=f.x*b.x+f.y*b.y+f.z*b.z,h=b.x*c.x+b.y*c.y+b.z*c.z,i=f.x*c.x+f.y*c.y+f.z*c.z,j=b.x*b.x+b.y*b.y+b.z*b.z,k=c.x*c.x+c.y*c.y+c.z*c.z,l=k*j-h*h;if(Math.abs(l)<d.EPS)return new e.LineIntersection(e.LineIntersection.Type.NON_INTERSECTING);var m=g*h-i*j,n=m/l,o=(g+h*n)/j,p=this.a.add(c.scaleSelf(n)),q=a.a.add(b.scaleSelf(o));return new e.LineIntersection(e.LineIntersection.Type.INTERSECTING,new e(p,q),n,o)},closestPointTo:function(a){var b=this.b.sub(this.a),c=a.sub(this.a).dot(b)/b.magSquared();return c<0?this.a.copy():c>1?this.b.copy():this.a.add(b.scaleSelf(c))},copy:function(){return new e(this.a.copy(),this.b.copy())},equals:function(a){return this==a?!0:typeof a!=e?!1:(this.a.equals(a.a)||this.a.equals(l.b))&&(this.b.equals(l.b)||this.b.equals(l.a))},getDirection:function(){return this.b.sub(this.a).normalize()},getLength:function(){return this.a.distanceTo(this.b)},getLengthSquared:function(){return this.a.distanceToSquared(this.b)},getMidPoint:function(){return this.a.add(this.b).scaleSelf(.5)},getNormal:function(){return this.b.cross(this.a)},hasEndPoint:function(a){return this.a.equals(a)||this.b.equals(a)},offsetAndGrowBy:function(a,b,c){var d=this.getMidPoint(),e=this.getDirection(),f=this.a.cross(e).normalize();return c!==undefined&&d.sub(c).dot(f)<0&&f.invert(),f.normalizeTo(a),this.a.addSelf(f),this.b.addSelf(f),e.scaleSelf(b),this.a.subSelf(e),this.b.addSelf(e),this},set:function(a,b){return this.a=a,this.b=b,this},splitIntoSegments:function(a,b,c){return e.splitIntoSegments(this.a,this.b,b,a,c)},toString:function(){return this.a.toString()+" -> "+this.b.toString()}},e.splitIntoSegments=function(a,b,c,d,e){d===undefined&&(d=[]),e&&d.push(a.copy());var f=a.distanceTo(b);if(f>c){var g=a.copy(),h=b.sub(a).limit(c);while(f>c)g.addSelf(h),d.push(g.copy()),f-=c}return d.push(b.copy()),d},e.LineIntersection=function(a,b,c,d){this.type=a,c===undefined&&(c=0),d===undefined&&(d=0),this.line=b,this.coeff=[c,d]},e.LineIntersection.prototype={getCoefficient:function(){return this.coeff},getLength:function(){return this.line===undefined?undefined:this.line.getLength()},getLine:function(){return this.line===undefined?undefined:this.line.copy()},getType:function(){return this.type},isIntersectionInside:function(){return this.type==e.LineIntersection.Type.INTERSECTING&&this.coeff[0]>=0&&this.coeff[0]<=1&&this.coeff[1]>=0&&this.coeff[1]<=1},toString:function(){return"type: "+this.type+" line: "+this.line}},e.LineIntersection.Type={NON_INTERSECTING:0,INTERSECTING:1},c.exports=e}),g("toxi/geom/BernsteinPolynomial",["require","exports","module"],function(a,b,c){var d=function(a){this.resolution=a;var b=new Array(a),c=new Array(a),d=new Array(a),e=new Array(a),f=0,g=1/(a-1);for(var h=0;h<a;h++){var i=1-f,j=i*i,k=f*f;b[h]=i*j,c[h]=3*f*j,d[h]=3*k*i,e[h]=f*k,f+=g}this.b0=b,this.b1=c,this.b2=d,this.b3=e};c.exports=d}),g("toxi/geom/CircleIntersector",["require","exports","module"],function(a,b,c){var d=function(a){this.circle=a,this.isec=undefined};d.prototype={getIntersectionData:function(){return this.isec},intersectsRay:function(a){this.isec.clear();var b=circle.sub(a),c=b.magSquared(),d=b.dot(a.getDirection()),e=circle.getRadius(),f=e*e-(c-d*d);return f>=0&&(this.isec.isIntersection=!0,this.isec.dist=d-Math.sqrt(f),this.isec.pos=a.getPointAtDistance(isec.dist),this.isec.normal=this.isec.pos.sub(this.circle).normalize()),this.isec.isIntersection}},c.exports=d}),g("toxi/geom/mesh/SphericalHarmonics",["require","exports","module","../../math/mathUtils"],function(a,b,c){var d=a("../../math/mathUtils"),e=function(a){this.m=a};e.prototype={computeVertexFor:function(a,b,c){var e=0;e+=Math.pow(d.sin(this.m[0]*c),this.m[1]),e+=Math.pow(d.cos(this.m[2]*c),this.m[3]),e+=Math.pow(d.sin(this.m[4]*b),this.m[5]),e+=Math.pow(d.cos(this.m[6]*b),this.m[7]);var f=d.sin(c);return a.x=e*f*d.cos(b),a.y=e*d.cos(c),a.z=e*f*d.sin(b),a},getPhiRange:function(){return d.TWO_PI},getPhiResolutionLimit:function(a){return a},getThetaRange:function(){return d.PI},getThetaResolutionLimit:function(a){return a}},c.exports=e}),g("toxi/geom/mesh/VertexSelector",["require","exports","module"],function(a,b,c){var d=function(a){this.mesh=a,this.selection=[]};d.prototype={addSelection:function(a){return this.checkMeshIdentity(a.getMesh()),this.selection.addAll(a.getSelection()),this},checkMeshIdentity:function(a){if(a!=this.mesh)throw new Error("The given selector is not using the same mesh instance")},clearSelection:function(){return this.selection.clear(),this},getMesh:function(){return this.mesh},getSelection:function(){return this.selection},invertSelection:function(){var a=[],b=mesh.getVertices(),c=b.length;for(var d=0;d<c;d++){var e=b[d];selection.contains(e)||a.add(e)}return this.selection=a,this},selectSimilar:function(a){var b=a.length;for(var c=0;c<b;c++){var d=a[c];this.selection.add(this.mesh.getClosestVertexToPoint(d))}return this},selectVertices:function(){return this},setMesh:function(a){this.mesh=a,this.clearSelection()},size:function(){return this.selection.size()},subtractSelection:function(a){return this.checkMeshIdentity(a.getMesh()),this.selection.removeAll(a.getSelection()),this}},c.exports=d}),g("toxi/internals",["require","exports","module"],function(a,b,c){var d=function(a,b){return typeof a!="undefined"?a:b};c.exports.extend=function(a,b){a.prototype=new b,a.constructor=a,a.prototype.parent=b.prototype},c.exports.hasProperties=function(a,b){if(a===undefined||typeof a!="object")return!1;var c=0,d=b.length,e;for(c=0;c<d;c++){e=b[c];if(!(e in a))return!1}return!0},c.exports.isArray=Array.isArray||function(a){return a.toString()=="[object Array]"};var e={};c.exports.each=function(a,b,c){if(a==null)return;if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(d in a&&b.call(c,a[d],d,a)===e)return}else for(var g in a)if(hasOwnProperty.call(a,g)&&b.call(c,a[g],g,a)===e)return},c.exports.removeItemFrom=function(a,b){var c=b.indexOf(a);return c>-1?b.splice(c,1):undefined},c.exports.mixin=function(a,b){c.exports.each(b,function(b,c){a[c]=b})},c.exports.numberCompare=function(a,b){if(a==b)return 0;if(a<b)return-1;if(a>b)return 1},c.exports.Int32Array=typeof Int32Array!="undefined"?Int32Array:Array,c.exports.Float32Array=typeof Float32Array!="undefined"?Float32Array:Array;var f=function(a){this.__it=a.slice(0)};f.prototype={hasNext:function(){return this.__it.length>0},next:function(){return this.__it.shift()}};var g=function(a){this.__obj={},this.__keys=[];for(var b in a)this.__obj[b]=a[b],this.__keys.push(b);this.__it=new f(this.__keys)};g.prototype={hasNext:function(){return this.__it.hasNext()},next:function(){var a=this.__it.next();return this.__obj[a]}};var h=function(a){return c.exports.isArray(a)?new f(a):new g(a)};c.exports.Iterator=h}),g("toxi/geom/mesh/BoxSelector",["require","exports","module","../../internals","./VertexSelector"],function(a,b,c){var d=a("../../internals").extend,e=a("./VertexSelector"),f=function(a,b){e.apply(this,[a]),this.box=b};d(f,e),f.prototype.selectVertices=function(){this.clearSelection();var a=this.mesh.getVertices(),b=a.length;for(var c=0;c<b;c++){var d=a[c];this.box.containsPoint(d)&&this.selection.add(d)}return this},c.exports=f}),g("toxi/geom/mesh/DefaultSelector",["require","exports","module","../../internals","./VertexSelector"],function(a,b,c){var d=a("../../internals").extend,e=a("./VertexSelector"),f=function(a){e.apply(this,[a])};d(f,e),f.prototype.selectVertices=function(){return this.clearSelection(),this.selection.addAll(this.mesh.getVertices()),this},c.exports=f}),g("toxi/geom/mesh/PlaneSelector",["require","exports","module","../../internals","./VertexSelector"],function(a,b,c){var d=a("../../internals").extend,e=a("./VertexSelector"),f=function(a,b,c,d){e.apply(this,[a]),this.plane=b,this.classifier=c,this.tolerances=d===undefined?1e-4:d};d(f,e),f.prototype.selectVertices=function(){this.clearSelection();var a=this.mesh.getVertices(),b=a.length;for(var c=0;c<b;c++){var d=a[c];this.plane.classifyPoint(d,this.tolerance)==this.classifier&&this.selection.add(d)}return this},c.exports=f}),g("toxi/math/BezierInterpolation",["require","exports","module"],function(a,b,c){var d=function(a,b){this.c1=a,this.c2=b};d.prototype={interpolate:function(a,b,c){var d=c*c,e=1-c,f=e*e;return a*f*e+3*(this.c1*(b-a)+a)*c*f+3*(this.c2*(b-a)+b)*d*e+b*d*c},setCoefficients:function(a,b){this.c1=a,this.c2=b}},c.exports=d}),g("toxi/math/CircularInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){a===undefined&&(this.isFlipped=!1)};d.prototype={interpolate:function(a,b,c){return this.isFlipped?a-(b-a)*(Math.sqrt(1-c*c)-1):(c=1-c,a+(b-a)*Math.sqrt(1-c*c))},setFlipped:function(a){this.isFlipped=a}},c.exports=d}),g("toxi/math/CosineInterpolation",["require","exports","module"],function(a,b,c){var d=function(){};d.prototype={interpolate:function(a,b,c){return b+(a-b)*(.5+.5*Math.cos(c*Math.PI))}},c.exports=d}),g("toxi/math/ExponentialInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){this.exponent=a===undefined?2:a};d.prototype={interpolate:function(a,b,c){return a+(b-a)*Math.pow(c,this.exponent)}},c.exports=d}),g("toxi/math/Interpolation2D",["require","exports","module"],function(a,b,c){var d={};d.bilinear=function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t;a instanceof Object?(k=a.x,l=a.y,m=b.x,n=b.y,o=c.x,p=c.y,q=d,r=e,s=f,t=g):(k=a,l=b,m=c,n=d,o=e,p=f,q=g,r=h,s=i,t=j);var u=1/((o-m)*(p-n)),v=(k-m)*u,w=(o-k)*u,x=l-n,y=p-l;return q*w*y+r*v*y+s*w*x+t*v*x},c.exports=d}),g("toxi/math/LinearInterpolation",["require","exports","module"],function(a,b,c){var d=function(){};d.prototype={interpolate:function(a,b,c){return a+(b-a)*c}},c.exports=d}),g("toxi/math/DecimatedInterpolation",["require","exports","module","./LinearInterpolation"],function(a,b,c){var d=a("./LinearInterpolation"),e=function(a,b){if(a===undefined)throw new Error("steps was not passed to constructor");this.numSteps=a,this.strategy=b===undefined?new d:b};e.prototype={interpolate:function(a,b,c){var d=Math.floor(c*this.numSteps)/this.numSteps;return this.strategy.interpolate(a,b,d)}},c.exports=e}),g("toxi/math/ScaleMap",["require","exports","module","./mathUtils","./LinearInterpolation"],function(a,b,c){var d=a("./mathUtils"),e=a("./LinearInterpolation"),f=function(a,b){this.min=a,this.max=b};f.prototype.toString=function(){return"{ min: "+this.min+", max: "+this.max+"}"};var g=function(a,b,c,d){if(arguments.length==1&&arguments[0].input!==undefined&&arguments[0].output!==undefined){var f=arguments[0];c=f.output.min,d=f.output.max,b=f.input.max,a=f.input.min}this.mapFunction=new e,this.setInputRange(a,b),this.setOutputRange(c,d)};g.prototype={getClippedValueFor:function(a){var b=d.clipNormalized((a-this._in.min)/this._interval);return this.mapFunction.interpolate(0,this.mapRange,b)+this._out.min},getInputMedian:function(){return(this._in.min+this._in.max)*.5},getInputRange:function(){return this._in},getMappedMedian:function(){return this.getMappedValueFor(.5)},getMappedValueFor:function(a){var b=(a-this._in.min)/this._interval;return this.mapFunction.interpolate(0,this.mapRange,b)+this._out.min},getOutputMedian:function(){return(this._out.min+this._out.max)*.5},getOutputRange:function(){return this._out},setInputRange:function(a,b){this._in=new f(a,b),this._interval=b-a},setMapFunction:function(a){this.mapFunction=a},setOutputRange:function(a,b){this._out=new f(a,b),this.mapRange=b-a},toString:function(){return"ScaleMap, inputRange: "+this._in.toString()+" outputRange: "+this._out.toString()}},c.exports=g}),g("toxi/math/SigmoidInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){a===undefined&&(a=2),this.setSharpness(a)};d.prototype={getSharpness:function(){return this.sharpness},interpolate:function(a,b,c){return c=(c*2-1)*this.sharpPremult,c=1/(1+Math.exp(-c)),a+(b-a)*c},setSharpness:function(a){this.sharpness=a,this.sharpPremult=5*a}},c.exports=d}),g("toxi/math/SinCosLUT",["require","exports","module","./mathUtils"],function(a,b,c){var d=a("./mathUtils"),e=function(a){a||(a=e.DEFAULT_PRECISION),this.precision=a,this.period=360/this.precision,this.quadrant=this.period>>2,this.deg2rad=Math.PI/180*this.precision,this.rad2deg=180/Math.PI/this.precision,this.sinLUT=[];for(var b=0;b<this.period;b++)this.sinLUT[b]=Math.sin(b*this.deg2rad)};e.prototype={cos:function(a){while(a<0)a+=d.TWO_PI;return this.sinLUT[(a*this.rad2deg+this.quadrant)%this.period]},getPeriod:function(){return this.period},getPrecision:function(){return this.precision},getSinLUT:function(){return this.sinLUT},sin:function(a){while(a<0)a+=d.TWO_PI;return this.sinLUT[a*this.rad2deg%this.period]}},e.DEFAULT_PRECISION=.25,e.DEFAULT_INSTANCE=undefined,e.getDefaultInstance=function(){return e.DEFAULT_INSTANCE===undefined&&(e.DEFAULT_INSTANCE=new e),e.DEFAULT_INSTANCE},c.exports=e}),g("toxi/math/ThresholdInterpolation",["require","exports","module"],function(a,b,c){var d=function(a){this.threshold=a};d.prototype={interpolate:function(a,b,c){return c<this.threshold?a:b}},c.exports=d}),g("toxi/math/ZoomLensInterpolation",["require","exports","module","./mathUtils","./CircularInterpolation"],function(a,b,c){var d=a("./mathUtils"),e=a("./CircularInterpolation"),f=function(a,b){this.leftImpl=new e,this.rightImpl=new e,this.lensPos=a||.5,this.lensStrength=b||1,this.absStrength=Math.abs(this.lensStrength),this.leftImpl.setFlipped(this.lensStrength>0),this.rightImpl.setFlipped(this.lensStrength<0)};f.prototype={interpolate:function(a,b,c){var d=a+(b-a)*c;return c<this.lensPos?d+=(this.leftImpl.interpolate(a,a+(b-a)*this.lensPos,c/this.lensPos)-d)*this.absStrength:d+=(this.rightImpl.interpolate(a+(b-a)*this.lensPos,b,(c-this.lensPos)/(1-this.lensPos))-d)*this.absStrength,d},setLensPos:function(a,b){this.lensPos+=(d.clipNormalized(a)-this.lensPos)*b},setLensStrength:function(a,b){this.lensStrength+=(d.clip(a,-1,1)-this.lensStrength)*b,this.absStrength=d.abs(this.lensStrength),this.leftImpl.setFlipped(this.lensStrength>0),this.rightImpl.setFlipped(this.lensStrength<0)}},c.exports=f}),g("toxi/math/noise/PerlinNoise",["require","exports","module","../SinCosLUT"],function(a,b,c){var d=a("../SinCosLUT"),e={};e.pow=Math.pow,e.random=Math.random,function(a,b,c,d,e,f,g){function h(a){var b,d,e=this,f=a.length,g=0,h=e.i=e.j=e.m=0;e.S=[],e.c=[],f||(a=[f++]);while(g<c)e.S[g]=g++;for(g=0;g<c;g++)b=e.S[g],h=k(h+b+a[g%f]),d=e.S[h],e.S[g]=d,e.S[h]=b;e.g=function i(a){var b=e.S,d=k(e.i+1),f=b[d],g=k(e.j+f),h=b[g];b[d]=h,b[g]=f;var i=b[k(f+h)];while(--a)d=k(d+1),f=b[d],g=k(g+f),h=b[g],b[d]=h,b[g]=f,i=i*c+b[k(f+h)];return e.i=d,e.j=g,i},e.g(c)}function i(a,b,c,d,e){c=[],e=typeof a;if(b&&e=="object")for(d in a)if(d.indexOf("S")<5)try{c.push(i(a[d],b-1))}catch(f){}return c.length?c:a+(e!="string"?"\0":"")}function j(a,b,c,d){a+="",c=0;for(d=0;d<a.length;d++)b[k(d)]=k((c^=b[k(d)]*19)+a.charCodeAt(d));a="";for(d in b)a+=String.fromCharCode(b[d]);return a}function k(a){return a&c-1}b.seedrandom=function l(k,l){var m=[],n;return k=j(i(l?[k,a]:arguments.length?k:[(new Date).getTime(),a,window],3),m),n=new h(m),j(n.S,a),b.random=function(){var a=n.g(d),b=g,h=0;while(a<e)a=(a+h)*c,b*=c,h=n.g(1);while(a>=f)a/=2,b/=2,h>>>=1;return(a+h)/b},k},g=b.pow(c,d),e=b.pow(2,e),f=e*2,j(b.random(),a)}([],e,256,6,52);var f=4,g=1<<f,h=8,i=1<<h,j=4095,k=.001,l=function(a,b){var c=(b+.5)*a._perlin_PI%a._perlin_TWOPI;return.5*(1-a._perlin_cosTable[c])},m=function(){this._perlin_octaves=4,this._perlin_amp_falloff=.5};m.prototype={noise:function(a,b,c){var m=0,a=a||0,b=b||0,c=c||0;if(!this._perlin){this._perlin=[];var n=j-1;for(m=0;m<j+1;m++)this._perlin[m]=e.random()}this._perlin_cosTable=d.getDefaultInstance().getSinLUT(),this._perlin_TWOPI=this._perlin_PI=d.getDefaultInstance().getPeriod(),this._perlin_PI>>=1,a<0&&(a=-a),b<0&&(b=-b),c<0&&(c=-c);var o=a,p=b,q=c,r=a-o,s=b-p,t=c-q,u,v,w=0,x=.5,y,z,A,B;for(m=0;m<this._perlin_octaves;m++){B=o+(p<<f)+(q<<h),u=l(this,r),v=l(this,s),y=this._perlin[B&j],y+=u*(this._perlin[B+1&j]-y),z=this._perlin[B+g&j],z+=u*(this._perlin[B+g+1&j]-z),y+=v*(z-y),B+=i,z=this._perlin[B&j],z+=u*(this._perlin[B+1&j]-z),A=this._perlin[B+g&j],A+=u*(this._perlin[B+g+1&j]-A),z+=v*(A-z),y+=l(this,t)*(z-y),w+=y*x,x*=this._perlin_amp_falloff;if(x<k)break;o<<=1,r*=2,p<<=1,s*=2,q<<=1,t*=2,r>=1&&(o++,r--),s>=1&&(p++,s--),t>=1&&(q++,t--)}return w},noiseDetail:function(a,b){a>0&&(this._perlin_octaves=a),b&&b>0&&(this._perlin_amp_falloff=b)},noiseSeed:function(a){e.seedrandom(a)}},c.exports=m}),g("toxi/math/noise/simplexNoise",["require","exports","module","../../internals"],function(a,b,c){var d=a("../../internals").Int32Array,e=0,f=Math.sqrt(3),g=Math.sqrt(5),h=.5*(f-1),i=(3-f)/6,j=i*2-1,k=1/3,l=1/6,m=(g-1)/4,n=(5-g)/20,o=n*2,p=n*3,q=n*4-1,r=[new d([1,1,0]),new d([-1,1,0]),new d([1,-1,0]),new d([-1,-1,0]),new d([1,0,1]),new d([-1,0,1]),new d([1,0,-1]),new d([-1,0,-1]),new d([0,1,1]),new d([0,-1,1]),new d([0,1,-1]),new d([0,-1,-1])],s=[new d([0,1,1,1]),new d([0,1,1,-1]),new d([0,1,-1,1]),new d([0,1,-1,-1]),new d([0,-1,1,1]),new d([0,-1,1,-1]),new d([0,-1,-1,1]),new d([0,-1,-1,-1]),new d([1,0,1,1]),new d([1,0,1,-1]),new d([1,0,-1,1]),new d([1,0,-1,-1]),new d([-1,0,1,1]),new d([-1,0,1,-1]),new d([-1,0,-1,1]),new d([-1,0,-1,-1]),new d([1,1,0,1]),new d([1,1,0,-1]),new d([1,-1,0,1]),new d([1,-1,0,-1]),new d([-1,1,0,1]),new d([-1,1,0,-1]),new d([-1,-1,0,1]),new d([-1,-1,0,-1]),new d([1,1,1,0]),new d([1,1,-1,0]),new d([1,-1,1,0]),new d([1,-1,-1,0]),new d([-1,1,1,0]),new d([-1,1,-1,0]),new d([-1,-1,1,0]),new d([-1,-1,-1,0])],t=new d([151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180]),u=function(){var a=new d(512);for(var b=0;b<512;b++)a[b]=t[b&255];return a}(),v=[new d([0,1,2,3]),new d([0,1,3,2]),new d([0,0,0,0]),new d([0,2,3,1]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([1,2,3,0]),new d([0,2,1,3]),new d([0,0,0,0]),new d([0,3,1,2]),new d([0,3,2,1]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([1,3,2,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([1,2,0,3]),new d([0,0,0,0]),new d([1,3,0,2]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([2,3,0,1]),new d([2,3,1,0]),new d([1,0,2,3]),new d([1,0,3,2]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([2,0,3,1]),new d([0,0,0,0]),new d([2,1,3,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([2,0,1,3]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([3,0,1,2]),new d([3,0,2,1]),new d([0,0,0,0]),new d([3,1,2,0]),new d([2,1,0,3]),new d([0,0,0,0]),new d([0,0,0,0]),new d([0,0,0,0]),new d([3,1,0,2]),new d([0,0,0,0]),new d([3,2,0,1]),new d([3,2,1,0])],w=function(a,b,c,d,e){var f=a[0]*b+a[1]*c;return d&&(f+=a[2]*d,e&&(f+=a[3]*e)),f},x=function(a){return a<0?Math.floor(a-1):Math.floor(a)},y={noise:function(a,b,c,d){var e=arguments.length,f=0,g=0,t=0,y=0,z=0,A=function(){switch(e){case 2:return(a+b)*h;case 3:return(a+b+c)*k;case 4:return(a+b+c+d)*m;default:throw new Error("Wrong arguments supplied to SimplexNoise.noise()")}}(),B=x(a+A),C=x(b+A),D=c!==undefined?x(c+A):undefined,E=d!==undefined?x(d+A):undefined,F=function(){switch(e){case 2:return(B+C)*i;case 3:return(B+C+D)*l;case 4:return(B+C+D+E)*n}}(),G=a-(B-F),H=b-(C-F),I=c!==undefined?c-(D-F):undefined,J=d!==undefined?d-(E-F):undefined;return e==2?function(){var a,b,c,d,e,h,k,l,m,n,o,p,q;return G>H?(a=1,b=0):(a=0,b=1),c=G-a+i,d=H-b+i,e=G+j,h=H+j,k=B&255,l=C&255,m=.5-G*G-H*H,m>0&&(m*=m,n=u[k+u[l]]%12,f=m*m*w(r[n],G,H)),t1=.5-c*c-d*d,t1>0&&(t1*=t1,o=u[k+a+u[l+b]]%12,g=t1*t1*w(r[o],c,d)),q=.5-e*e-h*h,q>0&&(q*=q,p=u[k+1+u[l+1]]%12,t=q*q*w(r[p],e,h)),70*(f+g+t)}():e==3?function(){var a,b,c,d,e,h,i,j,m,n,o,p,q,s,v,x,z,A,E,F,J,K,L,M,N,O;return G<H?H<I?(a=0,b=0,c=1,d=0,e=1,h=1):G<I?(a=0,b=1,c=0,d=0,e=1,h=1):(a=0,b=1,c=0,d=1,e=1,h=0):H<I?G<I?(a=0,b=0,c=1,d=1,e=0,h=1):(a=1,b=0,c=0,d=1,e=0,h=1):(a=1,b=0,c=0,d=1,e=1,h=0),i=G-a+l,j=H-b+l,m=I-c+l,n=G-d+k,o=H-e+k,p=I-h+k,q=G-.5,s=H-.5,v=I-.5,x=B&255,z=C&255,A=D&255,E=.6-G*G-H*H-I*I,E>0&&(E*=E,F=u[x+u[z+u[A]]]%12,f=E*E*w(r[F],G,H,I)),J=.6-i*i-j*j-m*m,J>0&&(J*=J,K=u[x+a+u[z+b+u[A+c]]]%12,g=J*J*w(r[K],i,j,m)),L=.6-n*n-o*o-p*p,L>0&&(L*=L,M=u[x+d+u[z+e+u[A+h]]]%12,t=L*L*w(r[M],n,o,p)),N=.6-q*q-s*s-v*v,N>0&&(N*=N,O=u[x+1+u[z+1+u[A+1]]]%12,y=N*N*w(r[O],q,s,v)),32*(f+g+t+y)}():function(){var a,b,c,d,e,h,i,j,k,l,m,r,x=v[function(){var a=0;return G>H&&(a=32),G>I&&(a|=16),H>I&&(a|=8),G>J&&(a|=4),H>J&&(a|=2),I>J&&(a|=1),a}()],A,F,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj;return a=x[0]<3?0:1,b=x[1]<3?0:1,c=x[2]<3?0:1,d=x[3]<3?0:1,e=x[0]<2?0:1,h=x[1]<2?0:1,i=x[2]<2?0:1,j=x[3]<2?0:1,k=x[0]<1?0:1,l=x[1]<1?0:1,m=x[2]<1?0:1,r=x[3]<1?0:1,A=G-a+n,F=H-b+n,K=I-c+n,L=J-d+n,M=G-e+o,N=H-h+o,O=I-i+o,P=J-j+o,Q=G-k+p,R=H-l+p,S=I-m+p,T=J-r+p,U=G+q,V=H+q,W=I+q,X=J+q,Y=B&255,Z=C&255,$=D&255,_=E&255,ba=.6-G*G-H*H-I*I-J*J,ba>0&&(ba*=ba,bb=u[Y+u[Z+u[$+u[_]]]]%32,f=ba*ba*w(s[bb],G,H,I,J)),bc=.6-A*A-F*F-K*K-L*L,bc>0&&(bc*=bc,bd=u[Y+a+u[Z+b+u[$+c+u[_+d]]]]%32,g=bc*bc*w(s[bd],A,F,K,L)),be=.6-M*M-N*N-O*O-P*P,be>0&&(be*=be,bf=u[Y+e+u[Z+h+u[$+i+u[_+j]]]]%32,t=be*be*w(s[bf],M,N,O,P)),bg=.6-Q*Q-R*R-S*S-T*T,bg>0&&(bg*=bg,bh=u[Y+k+u[Z+l+u[$+m+u[_+r]]]]%32,y=bg*bg*w(s[bh],Q,R,S,T)),bi=.6-U*U-V*V-W*W-X*X,bi>0&&(bi*=bi,bj=u[Y+1+u[Z+1+u[$+1+u[_+1]]]]%32,z=bi*bi*w(s[bj],U,V,W,X)),27*(f+g+t+y+z)}()}};c.exports=y}),g("toxi/math/noise",["require","exports","module","./noise/PerlinNoise","./noise/simplexNoise"],function(a,b,c){c.exports={PerlinNoise:a("./noise/PerlinNoise"),simplexNoise:a("./noise/simplexNoise")}}),g("toxi/math/waves/WaveState",["require","exports","module"],function(a,b,c){var d=function(a,b,c,d){this.phase=a,this.frequency=b,this.amp=c,this.offset=d};c.exports=d}),g("toxi/math/waves/AbstractWave",["require","exports","module","./WaveState"],function(a,b,c){var d=a("./WaveState"),e=function(a,b,c,d){if(a!==undefined||b!==undefined||c!==undefined||d!==undefined)this.setPhase(a),this.frequency=b,c===undefined&&(c=1),d===undefined&&(d=1),this.amp=c,this.offset=d};e.prototype={cyclePhase:function(a){return a===undefined&&(a=0),this.phase=(this.phase+a)%e.TWO_PI,this.phase<0&&(this.phase+=e.TWO_PI),this.phase},getClass:function(){return"AbstractWave"},pop:function(){if(this.stateStack===undefined||this.stateStack!==undefined&&this.stateStack.length<=0)console.log(this.toString()),console.log("no wave states on stack");else{var a=this.stateStack.pop();this.phase=a.phase,this.frequency=a.frequency,this.amp=a.amp,this.offset=a.offset}},push:function(){this.stateStack===undefined&&(this.stateStack=[]),this.stateStack.push(new d(this.phase,this.frequency,this.amp,this.offset))},reset:function(){this.phase=this.origPhase},setPhase:function(a){this.phase=a,this.cyclePhase(),this.origPhase=a},toString:function(){return this.getClass()+" phase:"+this.phase+" frequency: "+this.frequency+" amp: "+this.amp+" offset: "+this.offset},update:function(){console.log(this.getClass()+" this should be overridden")}},e.PI=3.141592653589793,e.TWO_PI=2*e.PI,e.hertzToRadians=function(a,b){return a/b*e.TWO_PI},e.radiansToHertz=function(a,b){return a/e.TWO_PI*b},c.exports=e}),g("toxi/math/waves/AMFMSineWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){typeof c=="number"?(e.apply(this,[a,b,1,c]),this.amod=d,this.fmod=f):(e.apply(this,[a,b]),this.amod=c,this.fmod=d)};d(f,e),f.prototype.getClass=function(){return"AMFMSineWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.amod.pop(),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.amod.push(),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset(),this.amod.reset()},f.prototype.update=function(){return this.amp=this.amod.update(),this.value=this.amp*Math.sin(this.phase)+this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=f}),g("toxi/math/waves/ConstantWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a){e.apply(this),this.value=a};d(f,e),f.prototype.getClass=function(){return"ConstantWave"},f.prototype.update=function(){return this.value},c.exports=f}),g("toxi/math/waves/FMHarmonicSquareWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){this.maxHarmonics=3,typeof c=="number"?(f===undefined&&(f=new ConstantWave(0)),e.apply(this,[a,b,c,d]),this.fmod=f):(e.apply(this,[a,b]),this.fmod=c)};d(f,e),f.prototype.getClass=function(){return"FMHarmonicSquareWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},f.prototype.update=function(){this.value=0;for(var a=1;a<=this.maxHarmonics;a+=2)this.value+=1/a*Math.sin(a*this.phase);return this.value*=this.amp,this.value+=this.offset,this.cyclePhase(this.frequency+this.fmod.update()),this.value},c.exports=f}),g("toxi/math/waves/FMSawtoothWave",["require","exports","module","../../internals","./AbstractWave"],function(a,b,c){var d=a("../../internals").extend,e=a("./AbstractWave"),f=function(a,b,c,d,f){typeof c=="number"?(e.apply(this,[a,b,c,d]),this.fmod=f):(e.apply(this,[a,b]),this.fmod=c)};d(f,e),f.prototype.getClass=function(){return"FMSawtoothWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(this),this.fmod.push()},f.prototype.reset=function(){this.parent.reset.call(this),this.fmod.reset()},f.prototype.update=function(){return this.value=(this.phase/e.TWO_PI*2-1)*this.amp+this.offset,this.cyclePhase(tly(this,[a,b,c,d]),this.fmod=f):(e.apply(this,[a,b]),this.fmod=c)};d(f,e),f.prototype.getClass=function(){return"FMSineWave"},f.prototype.pop=function(){this.parent.pop.call(this),this.fmod.pop()},f.prototype.push=function(){this.parent.push.call(thiototype.push=function(){this.parent.push.call(this),this.fmod.push()te=function(){return this.value=2*this.amp*(Math.abs(f.PI-this.phase)*e.INV_PI-.5)+this.offset,this.cyclePhase(this.frequency+thisve:a("./waves/AbstractWave"),AMFMSineWave:a("./waves/AMFMSineWave"),ConstantWave:a("./waves/ConstantWave"),FMHarmonicSquareWave:a("./waves/FMHarmoion"),DecimatedInterpolation:a("./math/DecimatedInterpolation"),ExponentialInterpolation:a("./math/ExponentialInterpolation"),Interpolation2D:a("./math/Interpolation2D"),LinearInterpolation:a("./matgthSquared=a*a,this},setStrength:function(a){return this.strength=a,this},update:function(a){var b=this.b.sub(this.a),c=b.magnitude()+d.EPS,e=(c-this.restLength)/(c*(this.a.invWeight+this.b.invWeightion(a,b,c,d,f){e.call(this,a,b,c,d),this.limit=f===pplyConstraint=function(a){a.setComponent(this.axis,this.constraint)xi/physics2d/constraints/RectConstraint",["require","exports","module"],functiry):d=a,c===undefined&&(c=!0);var e=this.createMesh(th>=1)for(var b=0,c=a.length;b<c;b++){var d=a[b];this.indexOf(d)<0&& d=a("./ArraySet"),e=function(){this._nodeLinks={},this._nodeIDs=[]};e.prototyelse if(a instanceof Number){var s=[a,b,c,d],t=[e,g,:function(a){for(var b=0;b<4;b++){var c=this.matrix[b],d=a.matrix[b]vert:function(){var a=[],b=[],c=[],d=this.toArray(),e=0;for(e=0;e<4;e++){var fc[3]=this.temp[3]}return this},rotateAroundAxis:func,q[2]=c,q[3]=d,q=this.matrix[1],q[0]=e,q[1]=f,q[2]=g,q[3]=h,q=this.m(),g.setPosition(a,b,c),this.multiplySelf(g)},transpose:function(){return this.w*b,m=this.w*c,n=this.w*d,o=b+","+c+","+d+","+f+","+1),c[g]=b*.5,b=.5/b,c[3]=(a.matrix[h][i]-a.matrix[i][h])*b,c[h]=(a.-(c.y-a.y)*(b.z-a.z);return d<0},k.prototype={closestPointOnSurface:function(dhis.b,this.c)},isClockwiseInXZ:function(){return k.isClockwiseInXY(this.a,this.b,this.c)},isClockwiseInYZ:function(){return k.isClockwiseInXY(this.a,this.b,this.c)},set:function(a,b,c){this.a=a,this.b=b,this.c=c},toBarycentric:function(a){var c=b.sublize()},flipVertexOrder:function(){var a=this.a;this.a=this.b,this.b=a,this.normal.invert()},getCentroid:function(){return this.a.add(this.b).addSelf(this.c).scale(1/3)},getClass:function(){return"Fis.a.copy(),this.b.copy(),this.c.copy())}},c.exports=e}),g("toxi/geoange=d.PI,this.thetaRange=d.TWO_PI};h.prototype={computeVertexFor:function(a,bn a.x=i*d.sign(f)*d.abs(f),a.y=d.sign(g)*d.abs(g),a.z=i*d.sign(h)*d.abs(h),a.scaleSelf(this.sphere.radius).addSelf(this.sphere)},getPhiRange:function(){return this.phiRange},getPhiResolutionLimit:function(a){return a},getThetaRange:function(){return this.thetaRange},getThetaResolutionLimit:function(a){return a},setMaxPhi:function(a){this.phiRange=d.min(a/2,d.PI)},setMaxTheta:function(a){this.t1],a.size=arguments[2],arguments.length==4&&(a.isClosed=arguments[3]));var c=a.mesh;if(c===undefined||c===null)c=new d;vcaleSelf(a.size),g.distanceTo(f)<1e-4&&g.set(f),t>0?(t==n&&a.isClosed&&(f.set(s[0].res||arguments[0].resolution):a.resolution=arguvar d=a("../../math/mathUtils"),e=a("../Matrix4x4"),g=a("./Face"),h=e"),j=a("../Triangle3D"),k=a("../Quaternion"),l=a("./Vertex"),m;a(["../AABB"],function(a){m=a});var n=function(a,b,c){return a===undefined&&(a="untitled"),b===undefined&&(b=n.DEFAULT_NUM_VERTICES),c===undefined&&(c=n.DEFAULT_NUM_FACES),this.setName(a),this.matrix=new e,this.vaddFace(d.a,d.b,d.c)}return this},center:function(a){this.computeCentroid();var b=a!==undefined?a.sub(this.centroid):this.centroid.getInverted(),c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];e.addSelf(b)}return this.getBoundingBox(),this.bounds},__checkVertex:function(a){var b=a.toString(),c=thisngth;for(b=0;b<a;b++){var c=this.faces[b];c.a.addFaceNormal(c),c.b.addFaceNorm.minSelf(e),b.maxSelf(e)}return this.bounds=m.fromMifunction(){var a=[],b=0,c=this.faces.length;for(var d=0;d<c;d++){var e=this.faces[d];a[b++]=e.a.id,a[b++]=e.b.id,a[b++]=e.c.id}return a},getIntersectionData:function(){return this.intersector.getIntersectionData()},getMeshAsVertexArray:function(a,b,c){a===undefined&&(a=undefined),b===undefined&&(b=0),c===undefined&&(c=n.DEFAULT_STRIDE),c=d.max(c,3),a===undefined&&(a=[]);var e=0,f=this.faces.length;for(var g=0;g<f;++g){var h=this.faces[g];a[e]=h.a.x,a[e+1]=h.a.y,a[e+2]=h.a.z,e+=c,a[e]=h.b.x,a[e+1]=h.b.y,a[e+2]=h.b.z,e+=c,a[e]=h.c.x,a[e+1a)},getUniqueVerticesAsArray:function(){var a=[],b=0,c=this.vertices.length;for(var d=0;b<c;d++){var e=this.vertices[d];a[b++]=e.x,a[b++]=e.y,a[b++]=e.z}return a},getVertexAtPoint:function(a){var b;for(var c=0;c<this.vertices.length;c++)this.vertices[c].equals(a)&&(b=c);return this.vertices[b]},getVertexIndex:function(a){var b=-1,c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];e.equals(a)&&(matchedVertex=d)}return matchedVertex},getVertexForID:function(a){var b,c=this.vertices.length;for(var d=0;d<c;d++){var e=this.vertices[d];if(e.id==a){b=e;break}}return b},getVertexrtices},handleSaveAsSTL:function(a,b){console.log("TriangleMesh.handleSaveAsSTL() currently not implemented")},intersectsRay:function(a){var b=this.intersector.getTriangle(),c=this.faces.length;for(var d=0;d<c;d++){b.a=f.a,b.b=f.b,b.c=f.c;if(this.intersector.intersectsRay(a))return!0}return!1},perforateFace:function(a,b){var c=a.getCentroid(),d=1-b,e=a.a.interpolateTo(c,d),f=a.b.interpolateTo(c,d),g=a.c.interpolateTo(c,d);return this.removeFace(a),this.addFace(a.a,f,e),this.addFace(a.a,a.b,f),this.addFace(a.b,gnction(a){return this.transform(this.matrix.identity().rotateY(a))},rotateZ:function(a){return this.transform(this.matrix.identity().rotateZ(a))},saveAsOBJ:function(a){console.log("TriangleMesh.saveAsOBJ() currently not implemented")},saveAsSTL:function(a,b,c){console.log("TriangleMesh.saveAsSTL() currently not implemented")},scale:function(a){return this.transform(this.matrix.identity().scaleSelf(a))},setName:function(a){return this.name=a,this},toString:function(){return"TriangleMesh: "+this.name+" vertices: "+this.getNumVertices()+" faces: "+this.getNumFaces()},toWEMesh:function(){conx(a);return c>-1&&(this.vertices.splice(v,1),this.vertices[c].set(b),this.vertices.push(v)),this}},c.exports=n}),g("toxi/geom/AABB",["require","exports","module","../internals","./Vec3D","./mesh/TriangleMesh","../math/mathUtils"],function(a,b,c){var d=a("../internals").extend,e=a("./Vec3D"),f=a("./mesh/TriangleMesh"),g=a("../math/mathUtils"),h=function(a,b){var c,d;a===undefined?(e.apply(this),this.setExtent(new e)):typeof a=="number"?(e.apply(this,[new e]),this.setExtent(a)):a instanceof e&&(e.apply(this,[a]),b===undefined&&a instanceof h?this.setExtent(a.getExtent()):typeof b=="number"{return this.min.copy()},h.prototype.getNormalForPoint=function(a){a=a.sub(this);var b=this.extent.sub(a.getAbs()),c=a.getSignum(),d=e.X_AXIS.scale(c.x),f=b.x;return b.y<f&&(f=b.y,d=e.Y_AXIS.scale(c.y)),b.z<f&&(d=e.Z_AXIS.scale(c.z)),d},h.prototype.includePoint=function(a){return this.min.minSelf(a),this.max.maxSelf(a),this.set(this.min.interpolateTo(this.max,.5)),this.extent.set(this.max.sub(this.min).scaleSelf(.5)),this},h.prototype.intersectsBox=function(a){var b=a.sub(this);return Math.abs(b.x)<=this.extent.x+a.extent.x&&Math.abs(b.y)<=this.extent.y+a.extent.y&&Math.abs(b.z)<=this.extent.z+a.extent.z},h.prototype.intersectsRay=function(a,b,c){var d=a.getDirection().reciprocal(),e=d.x<0,f=d.y<0,g=d.z<0,h=e?this.max:this.min,i=(h.x-a.x)*d.x;h=e?this.min:this.max;var j=(h.x-a.x)*d.x;h=f?this.max:this.min;var k=(h.y-a.y)*d.y;h=f?this.min:this.max;var l=(h.y-n<j&&(j=n),i<c&&j>b?a.getPointAtDistance(i):undefined)},h.prototype.intersectsSphere=function(a,b){arguments.length==1&&(b=a.radius);var c,d=0;return a.x<this.min.x?(c=a.x-this.min.x,d=c*c):a.x>this.max.x&&(c=a.x-this.max.x,d+=c*c),a.y<this.min.y?(c=a.y-this.min.y,d+=c*c):a.y>this.max.y&&(c=a.y-this.max.y,d+=c*c),a.z<this.min.z?(c=a.z-this.min.z,d+=c*c):a.z>this.max.z&&(c=a.z-this.max.z,d+=c*c),d<=b*b},h.prototype.intersectsTriangle=function(a){var b,c,d,e,f,h,i,j;b=a.a.sub(this),c=a.b.sub(this),d=a.c.sub(this),f=c.sub(b),h=d.sub(c),i=b.sub(d),j=f.getAbs();if(this.testAxis(f.z,-f.y,j.z,js.testAxis(h.y,-h.x,j.y,j.x,b.x,b.y,c.x,c.y,this.extent.x,this.extent.y))return!1;j=i.getAbs();if(this.testAxis(i.z,-i.y,j.z,j.y,b.y,b.z,c.y,c.z,this.extent.y,this.extent.z))return!1;if(this.testAxis(-i.z,i.x,j.z,j.x,b.x,b.z,c.x,c.z,this.extent.x,this.extent.z))return!1;if(this.testAxis(i.y,-i.x,j.y,j.x,c.x,c.y,d.x,d.y,this.extent.x,this.extent.y))return!1;if(g.min(b.x,c.x,d.x)>this.extent.x||g.max(b.x,c.x,d.x)<-this.extent.x)return!1;if(g.min(b.y,c.y,d.y)>this.extent.y||g.max(b.y,c.y,d.y)<-this.extent.y)return!1;if(g.min(b.z,c.z,d.z)>this.extent.z||g.max(b.z,c.z,d.z)<-this.extent.z)return!1;e=f.cross(h);var k=-e.dot(b);return this.planeBnstanceof e&&(b=a.y,c=a.z,a=a.a),this.x=a,this.y=b,this.z=c,this.updateBounds(),this)},h.prototype.setExtent=function(a){return this.extent=a.copy(),this.updateBounds()},h.prototype.testAxis=function(a,b,c,d,e,f,g,h,i,j){var k=a*e+b*f,l=a*g+b*h,m,n;k<l?(m=k,n=l):(m=l,n=k);var o=c*i+d*j;return m>o||n<-o},h.prototype.toMesh=function(a){a===undefined&&(a=new f("aabb",8,12));var b=new e(this.min.x,this.max.y,this.max.z),c=new e(this.max.x,this.max.y,this.max.z),d=new e(this.max.x,this.min.y,this.max.z),g=new e(this.min.x,this.min.y,this.max.z),h=new e(this.min.x,this.max.y,this.min.z),i=new e(this.max.x,this.max.y,this.min.z),j=new e(this.max.x,this.min.y,thundefined,undefined,undefined,undefined),a.addFace(j,k,g,undefined,undefined,undefined,undefined),a.addFace(j,g,d,undefined,undefined,undefined,undefined),a.addFace(h,b,k,undefined,undefined,undefined,undefined),a.addFace(b,g,k,undefined,undefined,undefined,undefined),a.addFace(c,i,j,undefined,undefined,undefined,undefined),a.addFace(c,j,d,undefined,undefined,undefined,undefined),a},h.prototype.toString=function(){return"<aabb> pos: "+this.parent.toString()+" ext: "+this.extent.toString()},h.prototype.updateBounds=function(){return this.extent!==undefined&&(this.min=this.sub(this.extent),this.max=this.add(this.extent)),this},c.exports=h}),g("toxi/geom/Vec3D",["req};g.prototype={abs:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this.z=Math.abs(this.z),this},add:function(a,b,c){return a instanceof Object?new g(this.x+a.x,this.y+a.y,this.z+a.z):new g(this.x+a,this.y+b,this.z+c)},addSelf:function(a,b,c){return a!==undefined&&b!==undefined&&c!==undefined?(this.x+=a,this.y+=b,this.z+=c):(this.x+=a.x,this.y+=a.y,this.z+=a.z),this},angleBeteturn result.x=this.y*e-d*this.z,result.y=this.z*c-e*this.x,result.z=this.x*d-c*this.y,result},crossSelf:function(a){var b=this.y*a.z-a.y*this.z,c=this.z*a.x-a.z*this.x;return this.z=a.y-a.x*this.y,this.y=c,this.x=b,this},distanceTo:function(a){if(a!==undefined){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return Math.a instanceof Number&&(a===g.Axis.X?a=0:a===g.Axis.Y?a=1:a=2);switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z}},getConstrained:function(a){return(new g(this)).constrain(a)},getFloored:function(){return(new g(this)).floor()},getFrac:function(){return(new g(this)).frac()},getInverted:function(){return new g(-this.x,-this.y,-this.z)},getLimited:function(a){return this.magSquared()>a*a?this.getNormalizedTo(a):new g(this)},getNormalized:function(){return(new g(this)).normalize()},getNormalizedTo:function(a){return(new g(this)).normalizeTo(a)},getReciprocal:function(){r.y,this.x)},headingXZ:function(){return Math.atan2(this.z,this.x)},headingYZ:function(){return Math.atan2(this.y,this.z)},immutable:function(){return this},interpolateTo:function(a,b,c){return c===undefined?new g(this.x+(a.x-this.x)*b,this.y+(a.y-this.y)*b,this.z+(a.z-this.z)*b):new g(c.interpolate(this.y,a.y,b),c.interpolate(this.y,a.y,b),c.interpolate(this.z,a.z,b))},interpolateToSelf:function(a,b,c){return c===undefined?(this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b,n d<a}else if(c>e){if(b<a)return d<a}else if(d>e&&b<turn!1},isZeroVector:function(){return Math.abs(this.x)<f.EPS&&Math.abs(this.y)<f.EPS&&f.abs(this.z)<f.EPS},jitter:function(a,b,c){if(b===undefined||c===undefined)b=c=a;return this.x+=f.normalizedRandom()*a,this.y+=f.normalizedRandom()*b,this.z+=f.normalizedRandom()a?this.normalize().scaleSelf(a):this},magnitude:function(){return Math.sqrt(thsqrt(this.x*this.x+this.y*this.y+this.z*this.z);return b>0&&(b=a/b,this.x*=b,this.y*=b,this.z*=b),this},reciprocal:function(){return this.x=1/this.x,this.y=1/this.y,this.z=1/this.z,this},reflect:function(a){return this.set(a.scale(this.dot(a)*2).subSelf(this))},rotateAroundAxis:function(a,b){var c=a.x,d=a.y,e=a.z,f=c*this.x,g=c*this.y,h=c*this.z,i=d*this.x,j=d*this.y,k=d*this.z,l=e*this.x,m=e*this.y,n=e*this.z;si=Math.sin(b),co=Math.cos(b);var o=c*(f+j+n)+(this.x*(d*d+e*e)-c*(j+n))*co+(-m+k)*si,p=d*(f+j+n)+(thi{return Math.abs(this.x)<.5?this.x=0:(this.x=this.x<0?-1:1,this.y=this.z=0),Math.abs(this.y)<.5?this.y=0:(this.y=this.y<0?-1:1,this.x=this.z=0),Math.abs(this.z)<.5?this.z=0:(this.z=this.z<0?-1:1,this.x=this.y=0),this},scale:function(a,b,c){if(a instanceof g)return new g(this.x*a.x,this.y*a.y,this.z*a.z);if(b===undefined||c===u){return this.x=this.x<0?-1:this.x===0?0:1,this.y=this.y<0?-1:this.y===0?0:1,this.z=this.z<0?-1:this.z===0?0:1,this},sub:function(a,b,c){if(a instanceof Object)return new g(this.x-a.x,this.y-a.y,this.z-a.z);if(b===undefined||c===undefined)b=c=a;return new g(this.x-a,this.y-b,this.z-c)},subSelf:function(a,b,c){if(a instanceof Object)return thic),this.y=Math.atan(b/a)+(a<0?Math.PI:0),this.x=c,this},toString:function(){return"[ x: "+this.x+", y: "+this.y+", z: "+this.z+"]"}},g.MIN_VALUE=new g(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),g.MAX_VALUE=new g(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),g.fromXYTheta=function(a){return new g(Math.cos(a),Math.sin(a),0)},g.fromXZTheta=function(a){return new g(Math.cos(a),0,Math.sin(a))},g.fromYZTheta=function(a){return new g(0,{getVector:function(){return g.Z_AXIS},toString:function(){return"Vec3D.Axis.Z"}}},c.exports=g}),g("toxi/geom/Vec2D",["require","exports","module","../math/mathUtils","./Vec3D","./Vec3D","./Vec3D","./Vec3D","../internals"],function(a,b,c){var d=a("../math/mathUtils"),e=a("../internals").hasProperties,f=function(a,b){a instanceof Object&&a.x!==undefined&&a.y!==undefined?(b=a.y,a=a.x):(a===undefa,b){if(b===undefined){var c=this.dot(a);return Math.acos(this.dot(a))}var d=b?this.getNormalized().dot(a.getNormalized()):this.dot(a);return Math.acos(d)},clear:function(){return this.x=this.y=0,this},compareTo:function(a){return this.x==a.x&&this.y==a.y?0:this.magSquared()-a.magSquared()},constrain:function(a,b){return e(a,["x","y"])&&e(b,["x","y"])?(this.x=d.clip(this.x,a.x,b.x),this.y=d.clip(this.y,a.y,b.y)):e(a,["x","y","width","height"])&&(this.x=d.clip(y,a.y,a.y+a.height)),this},copy:function(){return new f(this)},cross:function(his.y-a.y)<b?!0:!1},floor:function(){return this.x=d.floor(this.x),this.y=d.floor(this.y),this},frac:function(){return this.x-=d.floor(this.x),this.y-=d.floor(this.y),this},getAbs:function(){return(new f(this)).abs()},getComponent:function(a){return typeof a=="number"&&(a=a===0?f.Axis.X:f.Axis.Y),a==f.Axis.X?this.x:a==f.Axis.Y?this.y:0},getConstrained:function(a){return(new f(this)).constrain(a)},getFloored:function(){return(new f(this)).floor()},getFrac:function(){return(new f(this)).frac()},getInverted:functiurn(new f(this)).signum()},heading:function(){return Math.atan2(this.y,this.x)},interpolateTo:function(a,b,c){return c===undefined?new f(this.x+(a.x-this.x)*b,this.y+(a.y-this.y)*b):new f(c.interpolate(this.x,a.x,b),c.interpolate(this.y,a.y,b))},interpolateToSelf:function(a,b,c){return c===undefined?(this.x+=(a.x-this.x)*b,this.y+=(a.y-this.y)*b):(this.x=c.interpolate(this.x,a.x,b),this.y=c.interpolate(this.y,a.y,b)),this},invert:function(){return this.x*=-1,this.y*=-1,this},isInCircle:function(a,b){var c=this.sub(a).magSquared();return c<=b*b},isInRectangle:function(a){return this.x<a.x||this.x>a.x+a.width?!1:this.y<a.y||this.y>a.y+a.height?!1:!0},isInTriangle:function(a,b,c){var e=this.sub(a).normalize(),f=this.sS&&Math.abs(this.y)<d.EPS},jitter:function(a,b){var c=g(a,b);return this.x+=d.normalizedRandom()*c.x,this.y+=d.normalizedRandom()*c.y,this},limit:function(a){return this.magSquared()>a*a?this.normalize().scaleSelf(a):this},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},magSquared:function(){return this.x*this.x+this.y*this.y},max:function(a){return new f(d.max(this.x,a.x),;return this.y<0?Math.acos(-this.x/a)+d.PI:Math.acos(this.x/a)},reciprocal:function(){return this.x=1/this.x,this.y=1/this.y,this},reflect:function(a){return this.set(a.scale(this.dot(a)*2).subSelf(g(a,b);return this.x-=c.x,this.y-=c.y,this},tangentNormalOfEllipse:function(a,b){var c=this.sub(a),d=b.x*b.x,e=b.y*b.y;return(new f(c.x/d,c.y/e)).normalize()},toArray:function(){return[this.x,this.y]},toCartesian:function(){var a=this.x*Math.cos(this.y);return this.y=this.x*Math.sin(this.y),this.x=a,this},toPolar:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);return this.y=Math.atan2(this.y,this.x),this.x=a,this},toString:function(){var a="{x:"+this.x+", y:"+this.y+"}";return a}},f.prototype.bisect=function(b){var c=a("./Vec3D"function(a){return new f(Math.cos(a),Math.sin(a))},f.max=function(a,b){return new f(d.max(a.x,b.x),d.max(a.y,b.y))},f.min=function(a,b){return new f(d.min(a.x,b.x),d.min(a.y,b.y))},f.randomVector=function(a){var b=new f(Math.random()*2-1,Math.random()*2-1);return b.normalize()},c.exports=f}),g("toxi/color/TColor",["require","exports","module","../math/mathUtils","../geom/Vec2D","../geom/Vec3D"],function(a,b,c){var d=a("../math/mathUtils"),e=a("../geom/Vec2D"),f=a("../geom/Vec3D"),g=function(a){return a<0&&(a=4294967295+a+1),a.toString(16)},h=function(a){this.rgb=new Array(3),this.hsv=newetRGB(rgb)},adjustConstrast:function(a){return this.hsv[2]<.5?this.darken(a):this.lighten(a)},adjustHSV:function(a,b,c){return this.setHSV([this.hsv[0]+a,this.hsv[1]+b,this.hsv[2]+c])},adjustRGB:function(a,b,c){return this.setRGB([this.rgb[0]+a,this.rgb[1]+b,this.rgb[2]+c])},alpha:function(){return this._alpha},analog:function(a,b){var c=d.degrees(a);return this.rotateRYB(c*d.normalizedRandom()),this.hsv[1]+=b*d.normalizedRandom(),this.hsv[2]+=b*d.normalizedRandom(),this.setHSV(this.hsv)},black:function(){return this.cmyk[3]},blend:function(a,b){b===undefined&&(b=.5);var c=a.toRGBAArray();return this.rgb[0]+=(c[0]-this.rgb[0])*b,this.rgb[1]+=(c[1]-this.rgb[1])*b,this.rgb[2]+=(c[2]-this.rgb[2])*b,this._alp2]-a,0,1),this.setHSV(this.hsv)},desaturate:function(a){return this.hsv[1]=d.clip(this.hsv[1]-a,0,1),this.setHSV(this.hsv)},differenceTo:function(a){return h.newRGB(Math.abs(this.rgb[0]-a.rgb[0]),Math.abs(this.rgb[1]-a.rgb[1]),Math.abs(this.rgb[2]-a.rgb[2]))},distanceToCMYK:function(a){var b=a.toCMYKAArray(),c=this.cmyk[0]-b[0],d=this.cmyk[1]-b[1],e=this.cmyk[2]-b[2],f=this.cmyk[3]-b[3];returnfunction(a,b){return(new h(this)).analog(a,b)},getBlended:function(a,b){return(new h(this)).blend(a,b)},getComplement:function(){return(new h(this)).complement()},getComponentValue:function(a){return a.getComponentValueFor(this)},getDarkened:function(a){return(new h(this)).darken(a)},getDesaturated:function(a){return(new h(this)).desaturate(a)},getDifferenceTo:function(a){return this.copy().differenceTo(a)},getInverted:function(){return(new h(this)).invert()},getLightened:function(a){return(new h(this)).lighten(a)},getRotatedRYB:function(a){return(new h(this)).rotateRYB(a)},getSaturated:T&&this.rgb[0]==this.rgb[1]&&this.rgb[0]==this.rgb[2]},isGrey:function(){return this.rgb[0]>=h.WHITE_POINT&&this.rgb[0]==this.rgb[1]&&this.rgb[0]==this.rgb[2]},lighten:function(a){return this.hsv[2]=d.clip(this.hsv[2]+a,0,1),this.setHSV(this.hsv)},luminance:function(){return this.rgb[0]*.299+this.rgb[1]*.587+this.rgb[2]*.114},magenta:function(){return this.cmyk[1]},red:function(){return this.rgb[0]},rotateRYB:function(a){var b=parseInt(d.degrees(a),10),c=this.hsv[0]*3600/360,this.setHSV(this.hsv)},saturate:function(a){reV8BIT,(a>>8&255)*h.INV8BIT,(a&255)*h.INV8BIT),this._alpha=(a>>>24)*h.INV8BIT,this},setBlack:function(a){return this.cmyk[3]=a,this.setCMYK(cmyk)},setBlue:function(a){return this.rgb[2]=a,this.setRGB(this.rgb)},setBrightness:function(a){return this.hsv[2]=d.clip(a,0,1),this.setHSV(this.hsv)},setCMYK:function(a,b,c,d){return a instanceof Array&&(b=a[1],c=a[2],d=a[3],a=a[0]),this.cmyk[0]=a,this.cHue:function(a){a%=1,a<0&&a++,this.hsv[0]=a,this.setHSV(this.hsv)},setMagenta:function(a){return this.cmyk[1]=a,this.setCMYK(this.cmyk)},setRed:function(a){return this.rgb[0]=a,this.setRGB(this.rgb)},setRGB:function(a,b,c){return a instanceof Array&&(b=a[1],c=a[2],a=a[0]),this.rgb[0]=d.clip(a,0,1),this.rgb[1]=d.clip(b,0,1),this.rgb[2]=d.clip(c,0,1),this.cmyk=h.rgbToCMYK(this.rgb[0],this.rgb[1],this.rgb[2]),this.hsv=h.rgbToHSV(this.rgb[0],this.rgb[1],this.rgb[2CMYKAArray:function(a){return a===undefined&&(a=[]),a[0]=this.cmyk[0],a[1]=this.cmyk[1],a[2]=this.cmyk[2],a[3]=this.cmyk[3],a[4]=this._alpha,a},toHex:function(){var a=g(this.toARGB());return a.length>6&&(a=a.substring(2)),a},toHSVAArray:function(a){return a===undefined&&(a=[]),a[0]=this.hsv[0],a[1]=this.hsv[1],a[2]=this.hsv[2],a[3]=this._alpha,a},toHSLACSS:function(){var a=this.toHSVAArray();return a[0]=Math.floor(a[0]*360),a[1]=Math.floor(a[1]*100),a[2]=Math.floor(a[2]*100),"hsla("+a[0]+","+a[1]+"%,"+a[2]+"%,"+a[3]+")"},toRGBAArray:function(a,b){return a===undefined&&(a=[]),b==undefined"TColor: rgb: "+this.rgb[0]+", "+this.rgb[1]+", "+this.rgb[2]+" hsv: "+this.hsv[0]+","+this.hsv[1]+","+this.hsv[2]+" cmyk: "+this.cmyk[0]+", "+this.cmyk[1]+","+this.cmyk[2]+","+this.cmyk[3]+" alpha: "+this._alpha},yellow:function(){return this.cmyk[2]}},h.INV60DEGREES=60/360,h.INV8BIT=1/255,h.EPS=.001,h.BLACK_POINT=.08,h.WHITE_POINT=1,h.GREY_THRESHOLD=.01,h.cmykToRGB=function(a,b,c,d,e){return e===undefined&&(e=[0,0,0]),e[0]=1-Math.min(1,a+d),e[1]=1-Math.min(1,b+d),e[2]g,d[2]=c):(d[0]=c,d[1]=g,d[2]=i)}return d},h.labToRGB=function(a,b,c,d){d===undefined&&(d=[]);var e=(a+16)/116,f=b/500+eSVA=function(a,b,c,e){var f=new h;return f.setHSV(a,b,c),f.setAlpha(d.clip(e,0,1)),f},h.newRandom=function(){return h.newRGBA(Mathe(135,81),new e(150,103),new e(165,123),new e(180,138),new e(195,155),new e(210,171),new e(225,187),new e(240,204),new e(255,219),new e(270,234),npos+" dist:"+this.dist+" normal:"+this.normal),a}},c]).addSelf(h),f.set(i).subSelf(this.delta[g+1]);for(var j=0;j<b.reso;h+=e){var i=h*c;while(i>=this.arcLenIndex[g])g++;var j=this.vertices[g-1],k=this.vertices[g],l=(i-this.arcLenIndex[g-1])/(this.arcLenIndex[g]-this.arcLenIndex[g-1]),m=j.interpolateTo(k,l);this.uniform.push(m)}return b&&d.push(this.vertices[this.vertices.length-1]),d},getEstifA=[],this.delta=[],this.bi=[];for(var a=0;a<this.numP;a++)this.coeffA[a]=new d,this.delta[a]=new d;this.setTightness(this.tightness)}this.points=this.pointList.slice(0)}},f.DEFAULT_TIGHTNESS=.25,f.DEFAULT_RES=16,c.exports=f}),g("toxi/physics2d/PartisLocked):b===undefined?(b=a.y,c=1,a=a.x):(c=b,b=a.y,a=a.x)),e.apply(this,[a,b]),this.isLocked=!1,this.prev=new e(this),this.temp=new e,c=c||1,this.setWeight(c)};d.extend(f,e),f.prototype.addBehavior=function(a,b){this.behaviors===undefined&&(this.behaviors=[]);if(a===undefined)throw{name:"TypeError",message:"behavior was undefined"};return b=return this.force.clear(),this},f.prototype.clearVelocity=function(){return this.prev.set(this),this},f.prototype.getInvWeight=function(){return this.invWeight},f.prototype.getPreviousPosition=function(){return this.prev},f.prototype.getVelocity=function(){return this.sub(this.prev)},f.prototype.getWeight=function(){return this.weight},f.prototype.lock=function(){return this.isLocked=!0,this},ed=!1,this},f.prototype.update=function(){if(!this.isLocked){var a=this;this.applyBehaviors(),function(){a.temp.set(a),a.addSelf(a.sub(a.prev).addSelf(a.force.scale(a.weight))),a.prev.set(a.temp),a.force.clear()}(),this.applyConstraints()}},c.exports=f}),g("toxi/physics2d/ParticleString2D",["require","exports","module","./VerletParticle2D","./VerletSpring2D"],function(a,b,c){var d=a("./VerletPError("Incorrect Parameters, please supply plist or num, pos, step & mass");this.physics=a.physics,this.links=[];var f,g,h,i,j=0;if(b){var k=a.pos.copy(),l=a.step,m=a.mass,n=l.magnitude();this.particles=[],i=a.strength;for(j=0;j<a.num;j++)g=new d(k.copy(),m),this.particles.push(g),this.physics.particles.push(g),f!==undefined&&(h=this.createSpring(f,g,n,i),this.links.push(h),this.physics.addSpr.length-1]}},c.exports=f}),g("toxi/physics2d/behaviors/ConstantForceBehavior",["require","exports","module","../../geom/Vec2D"],function(a,b,c){var d=a("../../geom/Vec2D"),e=function(a){this.force=a,this.scaleForce=new d,this.timeStep=0};e.prototype={applyBehavior:function(a){a.addForce(this.scaledForce)},configure:function(a){this.timeStep=a,this.setForce(this.force)},getForce:function(){retu","module","./behaviors/AttractionBehavior","./behaviors/ConstantForceBehavior","./behaviors/GravityBehavior"],function(a,b,c){c.exports={AttractionBehavior:a("./behaviors/AttractionBehavior"),ConstantForceBehavior:a("./behaviors/ConstantForceBehavior"),GravityBehavior:a("./behaviors/GravityBehavior")}}),g("toxi/physos=new e,this.theta=a;parseInt(this.theta,10)!=this.theta&&(this.theta=d.radiastraint","./constraints/CircularConstraint","./constraints/MaxConstraint","./constraints/MinConstraint","./constraints/RectConstraint"],function(a,b,c){c.exports={AngularConstraint:a("./constraints/AngularConstraint"),AxisConstraint:a("./constraints/AxisConstraint"),CircularConstraint:a("./constraints/CircularConstraint"),MaxConstraint:a("./constraints/MaxConstraint"),MinConstraint:a("./constrned?(this.isIntersection=a.isIntersection,this.dist=a.dist,this.pos=a.pos.copy(),this.dir=a.dir.copy(),this.normal=a.nor"toxi/geom/Ray3DIntersector",["require","exports","module","./IsectData3D","../math/mathUtils"],function(a,b,c){var d=a("./IsectData3D"),e=a("../math/mathUtils");Ray3DIntersector=function(a){this.ray=a,this.isec=new d},Ray3DIntersector.prototype={getIntersectionData:function(tDirection=function(){return this.dir.copy()},g.prototype.getDistanceToPoint=function(a){var b=a.sub(this);return b.distanceTo(this.dir.scale(b.dot(this.dir)))},g.prototype.getPointAtDistance=function(a){return this.add(this.dir.scale(a))},g.prototype.setDirection=function(a){return this.dir.set(a).normalize(),this},g.prototype.toLine3DWithPointAtDistance=function(a){return new f(this,this.getPointAtDistance(a))},g.prototype.toString=function(){return"origin: "+this.parent.toString.call(this)+" dir: "+this.dir},c.exports=g}),g("toxi/geom/Cone",["require","exports","module","../internals","./Vec3D","./mesh/TriangleMesh"],function(a,b,c){var d=a("../internals").extend,e=a("./Vec3D"),f=a("./mesh/TriangleMeshs[0];b.mesh=c.mesh,b.steps=c.steps||c.resolution||c.res,b.thetaOffset=c.thetaOffset||b.thetaOffset,b.topClosed=c.topClosed||b.topClosed,b.bottomClosed=c.bottomClosed||b.bottomClosed}else b.steps=arguments[0];else arguments.length==2?(b.steps=arguments[0],b.thetaOffset=arguments[1]):arguments.length==5&&(b.mesh=arguments[0],b.sd,undefined,undefined,undefined),b.bottomClosed&&s.addFace(h,k[n],k[j],undefined,undefined,undefined,undefined),b.topClosed&&s.addFace(l[n],i,l[j]ototype={containsPoint:function(a){throw Error("Axisuments[0])e[f]=arguments[0][f];else arguments.length==2&&(e.steps=arguments[0],e.thetaOffset=arguments[1]);var g=new d(this.pos,this.getMajorAxis().getVector(),this.radius,this.radius,this.length);return g.toMesh(e.mesh,e.steps,e.thetaOffset,!0,!0)}},c.exports=e}),g("toxi/geom/XAxisCylinder",["require","exports","module","../internals","../maAxisAlignedCylinder"),h=function(a,b,c){g.apply(this,[a,b,c])};d(h,g),h.prototype.containsPoint=function(a){if(e.abs(a.y-this.pos.y)<this.length*.5){var b=a.x-this.pos.x,c=a.z-this.pos.z;if(Math.abse","exports","module","../internals","../math/mathUtub(a))/b,a.getPointAtDistance(c)):undefined},i.prototype.getProjectedPoint=function(a){var b,c;return this.normal.dot(this.sub(a))<0?b=this.normal.getInverted():b=this.normal,c=(new f(a,b)).getPointAtDistance(this.getDistanceToPoint(a)),c},i.prototype.intersectRayDifunction(a,b){return this.computePointAt(a,b,this.points)},set:function(a,b,c)y(d+1),h=1/d;for(var i=0;i<=d;i++){for(var j=0;j<=d;j++){var k=this.computePointAt(j*h,i*h,this.points);j>0&&i>0&&(c.addFace(k,f[j-1],g[j-1]),c.addFace(k,g[j-1],g[j])),f[j]=k}var l=g;g=f,f=l}return c}},f.computePointAt=function(a,b,c){var e=1-a,f=e*e*3*a,g=e*e*e,h=a*a,i=1-b,j=b*b*3,k=i*i*3,l=i*i*i,m=b*b*b,n=e*h*3,o=a*h,p=i*j,q=k*b,r=c[0],s=c[1],t=c[2],u=c[3],v=g*(r[0].x*l+r[1].x*q+r[2].x*p+r[3/mathUtils"),e=a("./TriangleMesh"),f=function(a,b){this.p1=a,this.p2=b};f.prototype={computeVertexFor:function(a,b,c){b-/mesh/Face"),PlaneSelector:a("./mesh/PlaneSelector"),SphereFunction:a("./mesh/SphereFunction"),SphericalHarmonics:a("./mesh/Spheric=0,d=!0,e=!0,g=!1;arguments.length==5?(b=arguments[1],d=arguments[2],e=arguments[3],g=arguments[4]):arguments.length==3&&(b=arguments[1],g=arguments[2]);var h=a.toMesh({mesh:new f,steps:b,thetaOffsNTER),b===this.app.CENTER?this.gfx.ellipse(a.x,a.y,c.x*2,c.y*2):b===z,j.x,j.y,j.z)}else{var k=1/3;e=a.faces.length;for(d=0;d<e;d++){var f=a.faces[d],l=f.a.add(f.b).addSelf(f.c).scaleSelf(k),m=l.add(f.normal.scale(c)),n=f.normal.scale(127);this.gfx.stroke(n.x+128,n.y,this.gfx.vertex(f.b.x,f.b.y,f.b.z),this.gfx.vertex(f.c.x,f.c.y,f.c.z)}this.gfx.endShape();if(c>0)if(b){e=a.vertices.length;for(d=0;d<e;d++){var h=a.vertices[d],i=h.add(h.normal.scale(c)),g=h.normal.scale(127);this.gfx.stroke(g.x+128,g.y+128,g.z+128),this.gfx.line(h.x,h.y,h.z,points3D:function(a){this.processVertices3D(a,this.===this.app.CENTER)this.gfx.rect(a.x+a.widt*.5,a.y+a.height*.5,a.width,a.height);else if(b===this.app.RADIUS){var c=a.width*.5,d=a.height*.5;this.gfx.rect(a.x+c,a.y+d,c,d)}},setGraphics:function(a){d&&f.uvC!==undefined?(this.gfx.vertex(f.a.x,f.a.y,f.a.z,f.uvA.x,f.uvon(a,b,c){c.exports={ToxiclibsSupport:a("./processing/ToxiclibsSupport")}}),g("toxi/geom/Ray2D",["require","exports","module","../internals","./Vec2D","./Line2D"],function(a,b,c){var d=a("../interna"toxi/geom/Line2D",["require","exports","module","./Ray2D"],function(b,c,d){vathis.a.copy(),this.b.copy())},equals:function(a){if(ar b=a;return(this.a.equals(b.a)||this.a.equals(b.b))&&(this.b.equal.b.x-this.a.x)-(a.b.x-a.a.x)*(this.b.y-this.a.y),d=(a.b.x-a.a.x)*(this.a.y-a.a.y)-(a.b.y-a.a.y)*(this.a.x-a.a.x),e=(this.b.x-this.gments:function(a,b,c){return f.splitIntoSegments(this.a,this.b,b,a,t)},getEdge:function(a){var b;switch(a){case 0:b=new f(new e(this.x,this.y),new e(this.x+this.width,this.y));break;case 1:b=new f(new e(this.x+this.width,this.y),new e(this.x+this.width,this.y+this.his.y>a.y+a.height||this.y+this.height<a.y)},scale:function(a){var b=this.getCentroid();return this.width*=a,this.height*=a,this.x=b.x-this.width*.5,this.y=b.y-this.height*.5,this},set:function(a,b,),this.y=d.min(this.y,a.y),this.height=b-this.y,this}},c.exports=h}),g("toxi/pes[b],a.constrain(this.worldBounds)},getCurrentBoundng:function(a,b){var c=0;for(c=0;c<this.springs.length;c++){var d=th;a++){c=this.behaviors[a];for(b=0;b<this.particles.length;b++)d=this.particles,"./Polygon2D","../math/mathUtils"],function(d,e,f){wBy(a,1e5,this.centroid),e=(new h(this.b.copy(),this.c.copy())).offsetAndGrowBy(b,1e5,this.centroid),f=(new h(this.c.copy(),this.a.copy())).offset,c=new g(b.x/b.z,b.y/b.z),d=this.a.distanceTo(this.bneIntersection.Type.NON_INTERSECTING&&k!=h.LineIntersection.Type.PARices[d];(h.y<g&&i.y>=g||i.y<g&&h.y>=g)&&h.x+(g-h.y)/(i.y-h.y)*(i.x-h.x)<f&&(e=!e),d=c}return e},containsPoly:function(a){for(var b=0,c=a.vertices.length;b<c;b++)if(!this.containsPoint(a.vertices[b]))return!1;return!0},flipVertexOrder:function(){return this.vertices.reverse(),=0,b=this.vertices.length;for(var c=0;c<b;c++){var dvertices.length>2?f.isClockwise(this.vertices[0],this.vertices[1],this.vertices[2]):!1},intersectsPoly:function(a){if(!this.containsPoly(a)){var b=this.getEdges(),c=a.getEdges();for(var d=0,f=b.lengon(a,b){var c=this.getCentroid(),d=this.vertices.length,e=[];for(var f=0,g=d-1,h=1;f<d;f++){var i=this.vertices[f],j=this.vertices[g].sub(i).addSelf(this.vertices[h].sub(i)).addSelf(i.sub(c).scaleSelf(b));e.push(i.add(j.scaleSelf(a))),g++,g==d&&(g=0),h++,h==d&&(h=0)}return this.vertices=e,this},toString:function(){var a="";for(var b=0;b<this.ii(c,d))};d(h,f),h.prototype.containsPoint=function(a){var b=this.getFoci();return a.distanceTo(b[0])+a.distanceTo(b[1])<2*e.max(this.radius.x,this.radius.y)},h.prototype.getArea=function(){return e.PI*radius.x*radius.y},h.prototype.getCircumference=function(){return Math.sqrt(.5*this.radius.magSquared())*e.TWO_PI},h.prototype.getFoci=function(){var a=[];return this.radius.x>this.radius.y?(a[0]=this.sub(this.focus,0),a[1]=this.add(this.focus,0)):(a[0]=this.sub(0,this.focus),a[1]=this.add(0,this.focus)),a},h.proals").extend,e=a("../math/mathUtils"),f=a("./Vec2D"),g=a("./Ellipse"),h=function(a,b,c){arguments.length==1?a instanceof h?g.apply(this,[a,a.radius.x]):g.apply(this,[0,0,a]):arguments.length==2?g.apply(this,[a,b]):(console.log("hit"),g.apply(this,[a,b,c,c]))};d(h,g),h.from2Points=function(a,b){var c=a.interpolateTo(b,.5),d=c.distanceTo(a);return new h(c,d)},h.from3Points=function(a,b,c){var d,o(a,.5);return this.intersectsCircle(new h(b,b.distanceTo(a)))},h.prototype.intersectsCircle=function(a){var b,c=a.sub(this),d=c.magnitude(),e=this.radius.x,f=a.radius.x;if(d<=e+f&&d>=Math.abs(e-f)){var g=(e*e-f*f+d*d)/(2*d);d=1/d;var h=this.add(c.scale(g*d)),i=Math.sqrt(e*e-exports={AABB:a("./geom/AABB"),BernsteinPolynomial:a("./geom/BernsteinPolynomial"),Circle:a("./geom/Circle"),CircleIntersector:a("./geom/CircleIntersector"),Cone:a("./geom/Cone"),Ellipse:a("./geom/Ellipse"),IsectData2D:a("./geom/IsectData2D"),IsectData3D:a("./geom/IsectData3D"),Line2D:a("./geom/Line2D"),Line3D:a("./geom/Line3D"),Matrix4x4:a("./geom/Matrix4x4"),Plane:a("./geom/Plane"),Polygon2Df,g,h){return{color:a,geom:b,internals:c,math:d,physics2d:e,processing:f,THREE:g,utils:h}}),g("toxi",["./toxi/main"],function(a){return a}),toxi=e("toxi")})()
